
<project name="Carrot2 Demo Browser" default="build">

    <property file="${user.home}/.carrot.properties" />
    <property file="local.properties" />

    <property name="project.dir"      location="${basedir}" />
    <property name="carrot2.cvs.dir"  location="../.." />
    <property name="dist.name"        value="carrot2-demo-browser" />

    <property name="type" value="jartype" />
    <property name="distribution.dir" location="${project.dir}/tmp/dist" />

    <import file="${carrot2.cvs.dir}/components/common-targets.inc" />

	<target name="build" depends="build.full" />

    <target name="dist" depends="clean,build.full">
    	<copy todir="${distribution.dir}" filtering="true">
			<filterchain>
				<tokenfilter>
				    <replacestring from="tmp\dist\" to="" />
				    <replacestring from="tmp/dist/" to="" />
				</tokenfilter>
			</filterchain>
    		<fileset dir=".">
    			<include name="demo.*" />
    		</fileset>
    	</copy>
    	<copy todir="${distribution.dir}">
    		<fileset dir=".">
    			<include name="components/**" />
    			<include name="processes/**" />
    		</fileset>
    	</copy>
    </target>

    <target name="build.full">
        <property name="copy.dependencies" value="true" />
        <property name="single.jar" value="false" />
		<property name="profile" value="full" />

        <ant target="build.${type}"
             antfile="${carrot2.cvs.dir}/components/master.xml" inheritall="true" inheritrefs="true">
        </ant>
    </target>
	
    <target name="build.stripped">
        <property name="copy.dependencies" value="true" />
        <property name="single.jar" value="false" />
		<property name="profile" value="stripped" />

        <ant target="build.${type}"
             antfile="${carrot2.cvs.dir}/components/master.xml" inheritall="true" inheritrefs="true">
        </ant>
    </target>
</project>
