<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" title="style" media="all" href="css/style.css" />
    <title>Document Clustering Server - Carrot2</title>
  </head>

  <body>
    <div id="content">
      <div id="logo"></div>
      <h1>Document Clustering Server</h1>
      
      <p>
        Document Clustering Server (DCS) <b>exposes Carrot<sup>2</sup> clustering
        as a REST service</b>. The service can cluster documents obtained by <b>querying some
        document source</b> (e.g. a search engine) or <b>documents provided directly</b> 
        to it as an <a href="#">XML stream</a>. 
      </p>

      <p>
        You can invoke clustering by sending a <tt>multipart/form-data</tt> HTTP POST request 
        to the <tt>/dcs/rest</tt> URL. Take a look at the 
        <a href="#">service parameters</a> or use the form below to trigger clustering
        from your browser.
      </p>
      
      <form name="dcs" action="/dcs/rest" method="post" enctype="multipart/form-data" target="_blank">
        <ul>
          <li>
            <label><span class="label">Document Source</span></label>
            <label><input id="source-external" checked="checked"  name="input-type" type="radio" />External document source</label><br />
            <label><input id="source-from-string" name="input-type" type="radio" />From XML string</label><br/>
            <label><input id="source-from-file" name="input-type" type="radio" />From XML file</label>
          </li>
          
          <li id="document-source" class="hide">
            <label>
              <span class="label">Document source</span>
              <select name="dcs.source" id="sources">
                <option>Loading...</option>
              </select>
            </label>
          </li>
          
          <li id="query" class="hide">
            <label>
              <span class="label">Query</span>
              <input name="query" type="text" />
            </label>
          </li>
          
          <li id="xml-file" class="hide">
            <label>
              <span class="label">XML File</span>
              <input name="dcs.c2stream" type="file" />
            </label>
          </li>
          
          <li id="xml-string">
            <label>
              <span class="label">XML string</span>
              <textarea name="dcs.c2stream" rows="10" cols="40"></textarea><br />
            </label>
          </li>
          
          <li>
            <label>
              <span class="label">Clustering Algorithm</span>
              <select id="algorithms" name="dcs.algorithm">
                <option>Loading...</option>
              </select>
            </label>
          </li>
          
          <li>
            <label>
              <span class="label">Output format</span>
            </label>
            <label><input checked="checked" name="dcs.output.format" type="radio" />XML</label><br />
            <label><input name="dcs.output.format" type="radio" />JSON</label><br />
          </li>
          
          <li>
            <label>
              <span class="label">Output only clusters</span>
              <input name="dcs.clusters.only" type="checkbox" value="true" /> 
            </label>
          </li>
        </ul>
        <ul class="submit">          
          <li>
            <button name="submit" type="submit">Cluster &raquo;</button><span class="hint">(opens in a new window)</span>
          </li>
        </ul>
      </form>
    </div>
    
    <script src="js/jquery-1.2.6.js" type="text/javascript"></script>
    <script type="text/javascript">//<![CDATA[
      $(document).ready(function() {
        $("#source-from-string, #source-from-file, #source-external").click(update).change(update);
        update();

        $("#sources").loadOptions("source");
        $("#algorithms").loadOptions("algorithm");
      });

      $.fn.loadOptions = function (option)
      {
        return this.each(function() {
          var $select = $(this);
          $.ajax({
            method: "GET",
            url: "dcs/components",
            dataType: "xml",
            success: function (data) {
              $select.html("");
              $(data).find(option).each(function() {
                $this = $(this);
                $select.append("<option value='" + $this.attr("id") + "'>" + $this.find("label").text() + "</option>"); 
              });
            }
          });
        });
      }

      $.fn.disabled = function(disabled) {
        return this.each(function() {
          var $this = $(this);
          if (disabled) {
            $this.hide();
          } else {
            $this.show();
          }
          $this.find(":input").attr("disabled", disabled);
        });
      };
      
      function update()
      {
        if ($("#source-from-string").is(":checked"))
        {
          $("#xml-string").disabled(false);
          $("#xml-file, #document-source, #query").disabled(true);
        }
        
        if ($("#source-from-file").is(":checked"))
        {
          $("#xml-file").disabled(false);
          $("#xml-string, #document-source, #query").disabled(true);
        }
        
        if ($("#source-external").is(":checked"))
        {
          $("#document-source, #query").disabled(false);
          $("#xml-string, #xml-file").disabled(true);
        }
      }
    //]]></script>
  </body>
</html>
