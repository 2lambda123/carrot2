<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN"
                 "http://www.docbook.org/xml/5.0/dtd/docbook.dtd" [
  <!ENTITY % local SYSTEM "local-entities.ent">
  <!ENTITY % custom SYSTEM "custom-entities.ent">
  %local;
  %custom;
]>
<chapter xml:id="chapter.descriptors" version="5.0"
         xmlns="http://docbook.org/ns/docbook">
  <title>Component descriptors</title>
  <subtitle>Example descriptor and attribute set XMLs</subtitle>

  <para>
    This chapter includes descriptors and attribute set XMLs for components that are
    not included in Carrot2 application distributions. For instructions on how to
    insert them into specific applications, please see 
    <xref linkend="section.advanced-topics.customizing-applications" />.
  </para>
  
  <section xml:id="section.descriptors.solr">
    <title>Solr</title>

    <para>
      For the Solr search engine, please use the descriptor shown in 
      <xref linkend="figure.solr-source-descriptor" />. You can provide
      your specific Solr configuration in the attribute set XML shown in
      <xref linkend="figure.solr-source-attributes" />.     
    </para>    
    
    <para>
      <figure xml:id="figure.solr-source-descriptor">
        <title>Solr document source descriptor</title>
        <programlisting><![CDATA[<source id="solr" 
    attribute-sets-resource="/carrot2-default/solr.attributes.xml"
    component-class="org.carrot2.source.solr.SolrDocumentSource">
    <label>Solr</label>
    <title>Solr Search Engine</title>
    <description>
      Searches the local instance of Solr
    </description>
    <mnemonic>S</mnemonic>
    <example-queries>
      <example-query>query1</example-query>
      <example-query>query2</example-query>
    </example-queries>
</source>]]></programlisting>
      </figure>      

      <figure xml:id="figure.solr-source-attributes">
        <title>Solr document source attributes</title>
        <programlisting><![CDATA[<attribute-sets>
  <attribute-set id="solr">
    <value-set>
      <label>Solr</label>
      <attribute key="SolrDocumentSource.serviceUrlBase">
        <value type="java.lang.String" 
               value="http://localhost:8983/solr/select" />
      </attribute>
      <attribute key="SolrDocumentSource.solrSummaryFieldName">
        <value type="java.lang.String" value="features" />
      </attribute>
      <!-- Title and URL are optional -->
      <attribute key="SolrDocumentSource.solrTitleFieldName">
        <value type="java.lang.String" value="name" />
      </attribute>
      <attribute key="SolrDocumentSource.solrUrlFieldName">
        <value type="java.lang.String" value="url" />
      </attribute>
    </value-set>
  </attribute-set>
</attribute-sets>]]></programlisting>
      </figure>
    </para>      
  </section>
</chapter>
