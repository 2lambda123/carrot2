<?xml version="1.0" encoding="UTF-8"?>
<process
    xmlns="http://www.dawidweiss.com/projects/carrot/processDescriptor"
    id="carrot2.process.html-display.scoresort.x-carrot-clustering-groups"
    description="Verbatim input, Dynamic Tree (score sorted)"
>
    <processing-script language="beanshell"><![CDATA[
    
    InputStream is;

    is = controller.invokeInputComponent( "carrot2.input.verbatim-input", query );
    
    Map         dtreeOptions = new HashMap();
    dtreeOptions.put("dtree.css", "compact");
    dtreeOptions.put("param.output.terminal.nodes", "true" );
    dtreeOptions.put("param.max.open.level", "1");
    dtreeOptions.put("param.max.subgroup.snippets.included", "3" );
    dtreeOptions.put("param.no.terminal.groups.expansion", "true" );
    
    // allowed values: 'ORDER_GROUP_DECLARATION_ORDER', 'ORDER_DOCUMENTS_ORDER', 'ORDER_SCORE_ATTRIBUTE'
    dtreeOptions.put("param.snippets.sorting.type", "ORDER_SCORE_ATTRIBUTE");

    is = controller.invokeOutputComponent( "carrot2.output.xslt-renderer.dynamic-tree", is, dtreeOptions );
    
    controller.sendResponse( is ); 
    
    ]]>
    </processing-script>
</process>
