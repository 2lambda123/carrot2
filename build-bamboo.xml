<?xml version="1.0" encoding="UTF-8" ?>

<project name="Carrot2 3.0 Bamboo builds" default="help">
    <property file="${bamboo.build.properties}" />

    <target name="build" description="Perform a full build.">
        <fail unless="carrot2.code.dir">Define: carrot2.code.dir</fail>

        <!-- clean everything -->
        <ant dir="${carrot2.code.dir}" antfile="build.xml" target="clean" inheritall="true" />

        <!-- full build and test of all components -->
        <ant dir="${carrot2.code.dir}" antfile="build.xml" target="test" inheritall="true" />

        <!-- build coverage report -->
        <ant dir="${carrot2.code.dir}" antfile="build.xml" target="coverage" inheritall="true" />
    </target>

    <target name="help">
        <echo>This file is used to drive automated Bamboo builds.</echo>
    </target>

    <target name="check">
      <fail unless="carrot2.code.dir">Define: carrot2.code.dir</fail>

      <echo>All required variables defined.</echo>
    </target>
</project>
