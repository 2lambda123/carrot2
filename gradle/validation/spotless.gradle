
allprojects { prj ->
  plugins.withType(JavaPlugin) {
    prj.apply plugin: 'com.diffplug.spotless'

    spotless {
      java {
        licenseHeaderFile licenseHeader
        lineEndings 'UNIX'
        endWithNewline()
        googleJavaFormat('1.9')
      }

      check.dependsOn(spotlessCheck)
    }

    task tidy() {
      description "Applies formatters and cleanups to sources."
      group "verification"

      dependsOn spotlessApply
    }
  }
}

configure(project(":dcs:contexts:frontend")) { prj ->
  prj.apply plugin: 'com.diffplug.spotless'

  spotless {
    format 'js', {
      target 'src/**/*.js'

      prettier('2.2.1').configFile('.prettierrc.json')

      lineEndings 'UNIX'
      endWithNewline()
    }

    check.dependsOn(spotlessCheck)
  }
}
