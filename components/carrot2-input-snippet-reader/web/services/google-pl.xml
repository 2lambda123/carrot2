<?xml version="1.0"?>
<!-- Query request description -->
<service>
    <request encoding="UTF-8">
        <!-- Query processing service.

          Specify the base url of the script/ host, which processes queries
          (don't include any parameters - they will be defined later).

          Also, specify the method of posting parameters to the service,
          either "post" or "get" are available.
        -->
        <service  url="http://www.google.com/search"  method="get" />

        <!-- Specify any other parameters which will be sent to the service
          If "value" attribute is defined, the parameter will have the
          value copied verbatim from this file. If "mapto" attribute
          is defined, the value will be copied from the runtime environment
          of the application (e.g. query.string will default to the current
          query string).

          Available maps:

          query.string
          query.startFrom
        -->
        <parameters>
            <parameter name="sourceid" value="mozilla-search" />
            <parameter name="q"       mapto="query.string" />
            <parameter name="start"   mapto="query.startFrom" />
            <parameter name="num"     value="50" />
            <parameter name="ie"      value="UTF-8" />
            <parameter name="oe"      value="UTF-8" />
			<!-- results only in Polish -->
            <parameter name="lr"        value="lang_pl" />
        </parameters>

        <!-- override the http-headers you need here -->
        <http-overrides>
            <header name="User-Agent">Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.7) Gecko/20011221</header>
            <header name="Accept-Charset">UTF-8</header>
        </http-overrides>
    </request>

    <response encoding="UTF-8">
        <!-- optional elements for multipage reader -->
        <pageinfo>
            <expected-results-per-page>50</expected-results-per-page>
            <!-- issues a warning if the number of recognized snippets drops below this percentage. -->
            <warn-when-below>0.8</warn-when-below>

            <!-- actual number of results found on a results page.
                 This property MUST be found for the snippets to
                 be extracted -->
            <number-of-matched-documents>
                <regexpression>
                    <match><![CDATA[of([ \r\n]+about)?[^f]{0,80}(for|from)]]></match>
                    <replace regexp="[^0123456789]*" with="" />
                </regexpression>
            </number-of-matched-documents>

            <!-- if no results number is found, the page is again checked whether
                 it matched a &apos;no-results&apos; page -->
            <no-results-marker>
                <regexpression>
                    <match><![CDATA[did not match any documents]]></match>
                </regexpression>
            </no-results-marker>
        </pageinfo>

        <!-- snippet extraction -->
        <snippet>
            <!-- this should match the entire snippet -->
            <match>
               <regexp><![CDATA[<!--m-->.*?<!--n-->]]></regexp>
            </match>
            <!-- This will cut out only the title.
                start and end matches give indexes in a snippet string, which are
                then used to cut out a substring.
             -->
            <title>
               <start consume="true">
                   <regexp><![CDATA[<!--m-->.*?<a.*?>]]></regexp>
               </start>
               <end   consume="true">
                   <regexp><![CDATA[</a>]]></regexp>
               </end>
            </title>

            <!-- This will cut out the url of the snippet.
             -->
            <url>
               <start consume="true">
                   <regexp><![CDATA[<!--m-->.*?<a href=(")?]]></regexp>
               </start>
               <end   consume="true">
                   <regexp><![CDATA["|>]]></regexp>
               </end>
            </url>

            <!-- This will cut out the summary of a snippet.
             -->
            <summary>
               <start consume="true">
                   <regexp><![CDATA[</a><br>(([\n\r]|.)*?File [fF]ormat.*?<br>)?]]></regexp>
               </start>
               <end   consume="true">
                   <regexp><![CDATA[<br><font]]></regexp>
               </end>
            </summary>
        </snippet>
    </response>
</service>
