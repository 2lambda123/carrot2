
KNOWN ISSUES
------------



1. Massimo Miccoli reports:

Users of  Debian Woody distribution and Tomcat4  must give write permission
to tomcat4 users on  /var/lib/tomcat4/webapps
so Carrot2 can work.  Is not a  true solution for security reason, but it
work.



2. Reported by: Haris Papadopoulos 

>> com.dawidweiss.carrot.filter.FilterRequestProcessorServlet - An 
>> internal component error occurred in processor 
>> com.stachoodev.carrot.filter.cluster.MultilingualLsiClustererRequestProcessor: 
>> java.lang.VerifyError: Cannot inherit from final class
>> java.lang.VerifyError: Cannot inherit from final class
>>    at java.lang.ClassLoader.defineClass0(Native Method)
>>    at java.lang.ClassLoader.defineClass(ClassLoader.java:502)
>>    at 

Tomcat 4.1.10

OK, I did some search my self and I made it work. The problem is that 
somehow my Tomcat can not work with xercesImpl.jar which I put in 
WEB-INF/lib of carrot web app. I removed it, so that Tomcat could use 
its own xml parser. 



3. Tomcat 5.XX and query encoding problems.

You must enforce proper decoding of URI parameters in the connector. You
can do it by adding this attribute to the connector spec. in server.xml

UseBodyEncodingForURI="true"



4. Deploying Carrot2 on Jonas (version 4.1)

This is not easy. And I can't guarantee it'll work for you, because
I have no experience with Jonas. But... I started Carrot2 components
in the following way:

a) Configure Jonas and make sure it starts and runs properly.

b) Recompile Carrot2 components in remote profile and bind them to
localhost:9000 using:

ant -Ddeployment.port=9000 remote

c) Copy Carrot2 WAR components to $JONAS$/webapps/autoload/
Skip carrot2-filter-stream-interceptor.war as it will not work
(no catalina.temp).

d) Copy the required JARs required by components to $JONAS$/lib/ext/carrot2
(create a subdirectory). I have tried copying them to /lib/common, as
the documentation of Jonas suggests, but it did not work for me.

from the copied JARs, remove the following (they are already in Jonas):

commons-beanutils
commons-logging
commons-xercesimpl

Remove an older version of Castor from: $JONAS$/lib/common/ws/jaxr/castor-0.9.3.9-xml.jar
and copy the Castor from Carrot2 to that directory.

e) You will have to adjust the cache's folder in the remote controller's
WAR -- the file is: 

carrot2-remote-controller.war/WEB-INF/cache-config.xml

Replace:

    <container
        implementation="com.dawidweiss.carrot.remote.controller.cache.ZIPCachedQueriesContainer"
    >
        <context-relative-dir>WEB-INF/precached-queries</context-relative-dir>
        <read-only>true</read-only>
    </container>

with:

    <container
        implementation="com.dawidweiss.carrot.remote.controller.cache.ZIPCachedQueriesContainer"
    >
        <context-relative-dir>/WEB-INF/precached-queries</context-relative-dir>
        <read-only>true</read-only>
    </container>
    
Also, the demo.jsp file has a reference that Jonas badly interprets:

replace:
        cached.setContextRelativeDir( "WEB-INF/precached-queries" );
with
        cached.setContextRelativeDir( "/WEB-INF/precached-queries" );

f) Start the server (jonas start)

g) Be patient ;)

h) go to http://localhost:9000/carrot2-remote-controller and it should work.


